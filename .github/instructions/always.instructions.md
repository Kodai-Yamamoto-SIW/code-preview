---
applyTo: '**'
---
# AIへのソースコード作成指示書

## 基本原則

以下のプログラミング原則とベストプラクティスを必ず遵守してソースコードを作成してください。

### 1. SOLID原則
- **S (Single Responsibility Principle)**: 各クラス・関数は単一の責任のみを持つ
- **O (Open/Closed Principle)**: 拡張に対して開いており、修正に対して閉じている
- **L (Liskov Substitution Principle)**: 派生クラスは基底クラスの代替可能である
- **I (Interface Segregation Principle)**: クライアントが使用しないメソッドに依存させない
- **D (Dependency Inversion Principle)**: 具象ではなく抽象に依存する

### 2. DRY原則 (Don't Repeat Yourself)
- 重複コードを避け、再利用可能な関数・クラス・モジュールを作成する
- 共通ロジックは適切に抽象化し、一箇所で管理する

### 3. Clean Code原則
- **意味のある名前**: 変数・関数・クラス名は意図を明確に表現する
- **小さな関数**: 関数は単一の責任を持ち、できるだけ短く保つ
- **コメント**: コードで表現できない場合のみコメントを書く（コード自体がドキュメントになることを目指す）
- **一貫性**: プロジェクト全体で命名規則やスタイルを統一する

### 4. セキュリティのベストプラクティス
- 入力値の検証とサニタイゼーションを必ず実施する
- SQLインジェクション、XSS、CSRFなどの脆弱性を防ぐ
- 機密情報（パスワード、APIキーなど）をハードコードしない
- 適切な認証・認可を実装する
- エラーメッセージに機密情報を含めない

### 5. エラーハンドリング
- 適切な例外処理を実装する
- エラーメッセージは明確で有用なものにする
- 予期しないエラーにも対処する（防御的プログラミング）
- エラーログを適切に記録する

### 6. テスト可能性
- 単体テストが容易なコード構造にする
- 依存関係を注入可能にする（DI）
- 副作用を最小限に抑える
- モック可能な設計にする

### 7. 保守性とバグ防止
- **保守性を最優先**: コードの変更・拡張が容易な構造にする
- **バグの予防**: 潜在的なバグを防ぐ設計と実装を行う
- 適切なインデントとフォーマットを維持する
- 長い関数やクラスは分割し、責任を明確にする
- マジックナンバーは定数として定義する
- null参照、配列の範囲外アクセスなどの一般的なエラーを防ぐ
- 型安全性を活用する（型システムがある言語の場合）
- 可読性は重要だが、保守性とバグ防止を優先する

### 8. パフォーマンスの考慮
- 不要な計算やループを避ける
- 適切なデータ構造とアルゴリズムを選択する
- データベースクエリの最適化（N+1問題の回避など）
- 必要に応じてキャッシュを活用する
- ただし、早期最適化は避け、まずは保守性とバグ防止を優先する

## 実装時の注意事項

- コードレビューを想定した品質で作成する
- 既存のコードスタイルと一貫性を保つ
- 使用する言語・フレームワークのベストプラクティスに従う
- ドキュメントが必要な場合は適切にコメントを追加する
